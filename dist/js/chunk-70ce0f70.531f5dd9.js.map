{"version":3,"sources":["webpack:///./node_modules/core-js/internals/engine-ff-version.js","webpack:///./src/components/game/planeZone.vue?3f08","webpack:///./src/components/game/player.vue?acde","webpack:///./node_modules/core-js/modules/es.math.hypot.js","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./node_modules/core-js/internals/engine-webkit-version.js","webpack:///./src/views/Game.vue?15ea","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./src/components/game/plane.vue?57af","webpack:///./src/components/game/planePort.vue?374b","webpack:///./src/views/Game.vue?4e7f","webpack:///./src/components/game/player.vue?0570","webpack:///./src/components/game/plane.vue?fdf1","webpack:///./src/components/game/planeZone.vue?96c1","webpack:///./src/components/game/planeZoneSides.vue?b1e9","webpack:///src/components/game/planeZoneSides.vue","webpack:///./src/components/game/planeZoneSides.vue?cae5","webpack:///./src/components/game/planeZoneSides.vue","webpack:///./src/components/game/dice.vue?1401","webpack:///./src/components/game/diceSideValueSelect.vue?f8ea","webpack:///src/components/game/diceSideValueSelect.vue","webpack:///./src/components/game/diceSideValueSelect.vue?9e6b","webpack:///./src/components/game/diceSideValueSelect.vue","webpack:///src/components/game/dice.vue","webpack:///./src/components/game/dice.vue?0f68","webpack:///./src/components/game/dice.vue","webpack:///src/components/game/planeZone.vue","webpack:///./src/components/game/planeZone.vue?145b","webpack:///./src/components/game/planeZone.vue","webpack:///./src/components/game/planePort.vue?bc3c","webpack:///src/components/game/planePort.vue","webpack:///./src/components/game/planePort.vue?e1d9","webpack:///./src/components/game/planePort.vue","webpack:///src/components/game/plane.vue","webpack:///./src/components/game/plane.vue?39c2","webpack:///./src/components/game/plane.vue","webpack:///./src/components/game/card.vue?de62","webpack:///src/components/game/card.vue","webpack:///./src/components/game/card.vue?300a","webpack:///./src/components/game/card.vue","webpack:///./src/components/game/cardWorker.vue?1f47","webpack:///src/components/game/cardWorker.vue","webpack:///./src/components/game/cardWorker.vue?94de","webpack:///./src/components/game/cardWorker.vue","webpack:///src/components/game/player.vue","webpack:///./src/components/game/player.vue?057f","webpack:///./src/components/game/player.vue","webpack:///./src/components/game/bridge.vue?34ca","webpack:///src/components/game/bridge.vue","webpack:///./src/components/game/bridge.vue?b739","webpack:///./src/components/game/bridge.vue","webpack:///src/views/Game.vue","webpack:///./src/views/Game.vue?6d24","webpack:///./src/views/Game.vue","webpack:///./src/components/game/card.vue?10a9","webpack:///./src/components/game/dice.vue?9ee1","webpack:///./src/components/game/diceSideValueSelect.vue?cf1c","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./src/components/game/cardWorker.vue?530b","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./node_modules/core-js/internals/array-sort.js","webpack:///./src/components/game/bridge.vue?297e","webpack:///./src/components/game/planeZoneSides.vue?584d","webpack:///./node_modules/core-js/internals/engine-is-ie-or-edge.js"],"names":["userAgent","firefox","match","module","exports","$","$hypot","Math","hypot","abs","sqrt","BUGGY","Infinity","NaN","target","stat","forced","value1","value2","arg","div","sum","i","aLen","arguments","length","larg","aCallable","toObject","toLength","toString","fails","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","test","nativeSort","sort","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","value","index","result","String","fromCharCode","push","k","v","a","b","charAt","FORCED","getSortCompare","comparefn","x","y","proto","array","this","call","itemsLength","items","arrayLength","webkit","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","replace","start","end","trim","render","_vm","_h","$createElement","_c","_self","game","class","isMobile","isLandscape","attrs","on","$event","preventDefault","zoomGamePlane","apply","style","Object","assign","gamePlaneCustomStyleData","opacity","transformOrigin","gamePlaneControlStyle","_l","keys","planeMap","id","key","bridgeMap","position","joinPortId","joinPortDirect","targetPortId","targetPortDirect","staticClass","addPlane","_v","_s","statusLabel","deck","_id","takeDice","itemMap","_e","takeCard","sortActiveCards","currentPlayer","showPlayerControls","staticRenderFns","player","concat","customClass","iam","active","planeInHandIds","subtype","name","playerId","showControls","plane","activeEvent","values","stopPropagation","e","choosePlane","selectPlane","linkLines","cardPlane","customBG","item","entries","ref","line","x1","y1","x2","y2","zone","vertical","available","left","top","color","fontSize","putDice","sideList","side","props","Array","Number","methods","mounted","$nextTick","component","dice","deleted","locked","hide","chooseDice","pickDice","rotateDice","staticStyle","replaceAllowed","deleteDice","restoreDice","eventData","fakeValue","openDiceSideValueSelect","selectedDiceSideId","pickActiveEventDiceSide","selectValue","computed","event","$emit","components","diceSideValueSelect","diceId","inHand","Boolean","map","actionsDisabled","currentPlayerIsActive","visible","placedAtRound","currentRound","$store","commit","targetId","planeZoneSides","zoneId","getStore","port","linkedBridge","portId","portEl","closest","linkEl","planePort","planeZone","data","planeId","customStyle","width","height","rotation","transform","includes","zoneIds","zoneMap","portIds","portMap","storageFillData","fillData","floor","random","pid","localStorage","setItem","JSON","stringify","centerPlaneBackground","gamePlane","querySelectorAll","forEach","p","t","rect","bottom","l","r","right","ot","offsetTop","ol","offsetLeft","dispatch","setTimeout","card","played","showInfo","canPlay","playCard","cardId","api","helper","action","choiceEnabled","endRound","timerEndTime","localTimer","cardDeckCount","localTimerUpdateTime","localTimerId","timerUpdateTime","clearTimeout","Date","now","setInterval","cardWorker","dominoDecks","deckIds","cardDecks","deckMap","deckCounters","showDecks","bridge","bridgeId","tutorial","gamePlaneScale","gamePlaneTranslateX","gamePlaneTranslateY","gamePlaneRotation","gamePlaneConfig","isDragging","isTouchMoved","currentX","currentY","initialX","initialY","distanceX","distanceY","initialDistance","xOffset","yOffset","isRotating","initialRotateAngle","rotationLast","gameId","$route","params","status","round","playerIds","ids","slice","curPlayerIdx","deckList","list","activeCards","find","possibleAddPlanePositions","availablePorts","watch","val","selector","document","getElementById","setAttribute","querySelector","classList","add","$router","arr","deltaY","addEventListener","body","contains","button","config","clientX","clientY","self","touches","touch1","pageX","touch2","pageY","atan2","delta","IndexedObject","toIndexedObject","nativeJoin","join","ES3_STRINGS","separator","DESCRIPTORS","global","isForced","redefine","has","classof","inheritIfRequired","isSymbol","toPrimitive","create","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","NUMBER","NativeNumber","NumberPrototype","prototype","BROKEN_CLASSOF","toNumber","argument","TypeError","first","third","radix","maxCode","digits","it","charCodeAt","parseInt","NumberWrapper","dummy","valueOf","split","j","constructor","mergeSort","middle","insertionSort","merge","element","llength","rlength","lindex","rindex","UA"],"mappings":"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","file":"js/chunk-70ce0f70.531f5dd9.js","sourcesContent":["var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planeZone.vue?vue&type=style&index=0&id=652bed6a&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./player.vue?vue&type=style&index=0&id=1a5beabe&scoped=true&lang=css&\"","var $ = require('../internals/export');\n\n// eslint-disable-next-line es/no-math-hypot -- required for testing\nvar $hypot = Math.hypot;\nvar abs = Math.abs;\nvar sqrt = Math.sqrt;\n\n// Chrome 77 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=9546\nvar BUGGY = !!$hypot && $hypot(Infinity, NaN) !== Infinity;\n\n// `Math.hypot` method\n// https://tc39.es/ecma262/#sec-math.hypot\n$({ target: 'Math', stat: true, forced: BUGGY }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  hypot: function hypot(value1, value2) {\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * sqrt(sum);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? nativeSort.call(array) : nativeSort.call(array, comparefn);\n\n    var items = [];\n    var arrayLength = toLength(array.length);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) items.push(array[index]);\n    }\n\n    items = internalSort(items, getSortCompare(comparefn));\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=style&index=0&lang=css&\"","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plane.vue?vue&type=style&index=0&id=4a12e60d&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planePort.vue?vue&type=style&index=0&id=344e6e0c&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.game._id)?_c('div',{class:[_vm.isMobile ? 'mobile-view' : '', _vm.isLandscape ? 'landscape-view' : 'portrait-view'],attrs:{\"id\":\"game\"},on:{\"wheel\":function($event){$event.preventDefault();return _vm.zoomGamePlane.apply(null, arguments)}}},[_c('tutorial',{attrs:{\"inGame\":true}}),_c('div',{style:(Object.assign({}, _vm.gamePlaneCustomStyleData, {opacity: 1, transformOrigin: 'top'}, _vm.gamePlaneControlStyle)),attrs:{\"id\":\"gamePlane\"}},[_vm._l((Object.keys(this.game.planeMap)),function(id){return _c('plane',{key:id,attrs:{\"planeId\":id}})}),_vm._l((Object.keys(this.game.bridgeMap)),function(id){return _c('bridge',{key:id,attrs:{\"bridgeId\":id}})}),_vm._l((_vm.possibleAddPlanePositions),function(position){return _c('div',{key:position.joinPortId + position.joinPortDirect + position.targetPortId + position.targetPortDirect,staticClass:\"fake-plane\",style:(position.style),attrs:{\"joinPortId\":position.joinPortId,\"joinPortDirect\":position.joinPortDirect,\"targetPortId\":position.targetPortId,\"targetPortDirect\":position.targetPortDirect},on:{\"click\":_vm.addPlane}})})],2),_c('div',{staticClass:\"gui game-decks\"},[_c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"game-status-label\"},[_vm._v(_vm._s(_vm.statusLabel))]),_vm._l((_vm.deckList),function(deck){return _c('div',{key:deck._id,staticClass:\"deck\",attrs:{\"code\":deck.code}},[(deck._id && deck.code === 'Deck[domino]')?_c('div',{staticClass:\"hat\",on:{\"click\":_vm.takeDice}},[_vm._v(\" \"+_vm._s(Object.keys(deck.itemMap).length)+\" \")]):_vm._e(),(deck._id && deck.code === 'Deck[card]')?_c('div',{staticClass:\"card-event\",on:{\"click\":_vm.takeCard}},[_vm._v(\" \"+_vm._s(Object.keys(deck.itemMap).length)+\" \")]):_vm._e(),(deck._id && deck.code === 'Deck[card_drop]')?_c('div',{staticClass:\"card-event\"},[_vm._v(\" \"+_vm._s(Object.keys(deck.itemMap).length)+\" \")]):_vm._e(),(deck._id && deck.code === 'Deck[card_active]')?_c('div',{staticClass:\"deck-active\"},_vm._l((_vm.sortActiveCards(Object.keys(deck.itemMap))),function(id){return _c('card',{key:id,attrs:{\"cardId\":id,\"canPlay\":true}})}),1):_vm._e()])})],2)]),_c('player',{attrs:{\"playerId\":_vm.currentPlayer,\"customClass\":['gui'],\"iam\":true,\"showControls\":_vm.showPlayerControls}}),_c('div',{staticClass:\"gui players\"},_vm._l((_vm.playerIds),function(id,index){return _c('player',{key:id,attrs:{\"playerId\":id,\"customClass\":[(\"idx-\" + index)],\"showControls\":false}})}),1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.player._id)?_c('div',{class:['player' ].concat( _vm.customClass, [_vm.iam ? 'iam' : ''], [_vm.player.active ? 'active' : ''])},[_c('div',{staticClass:\"player-hands\"},[(_vm.planeInHandIds.length)?_c('div',{staticClass:\"hand-planes\"},_vm._l((_vm.planeInHandIds),function(id){return _c('plane',{key:id,attrs:{\"planeId\":id,\"inHand\":true}})}),1):_vm._e(),(_vm.iam)?_c('div',{staticClass:\"hand-cards-list\"},_vm._l((_vm.cardDecks),function(deck){return _c('div',{key:deck._id,staticClass:\"hand-cards\"},_vm._l((Object.keys(deck.itemMap)),function(id){return _c('card',{key:id,attrs:{\"cardId\":id,\"canPlay\":_vm.iam}})}),1)}),0):_vm._e(),_c('div',{staticClass:\"hand-dices-list\"},_vm._l((_vm.dominoDecks),function(deck){return _c('div',{key:deck._id,staticClass:\"hand-dices\"},[(_vm.iam && deck.subtype === 'teamlead')?_c('card',{attrs:{\"card\":{ name: 'teamlead' }}}):_vm._e(),(_vm.iam && deck.subtype === 'flowstate')?_c('card',{attrs:{\"card\":{ name: 'flowstate' }}}):_vm._e(),_vm._l((Object.keys(deck.itemMap)),function(id){return _c('dice',{key:id,attrs:{\"diceId\":id,\"inHand\":true,\"iam\":_vm.iam}})})],2)}),0)]),_c('div',{staticClass:\"workers\"},[_c('card-worker',{attrs:{\"playerId\":_vm.playerId,\"iam\":_vm.iam,\"showControls\":_vm.showControls}})],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.plane._id)?_c('div',{class:['plane', _vm.activeEvent ? 'active-event' : '' ].concat( _vm.plane.customClass, Object.values(_vm.customClass)),style:(_vm.customStyle),on:{\"click\":function($event){$event.stopPropagation();return (function (e) { return (_vm.activeEvent ? _vm.choosePlane() : _vm.selectPlane(e)); }).apply(null, arguments)}}},[_c('div',{staticClass:\"zone-wraper\"},_vm._l((_vm.zoneIds),function(id){return _c('plane-zone',{key:id,attrs:{\"zoneId\":id,\"linkLines\":_vm.linkLines}})}),1),_c('div',{staticClass:\"port-wraper\"},_vm._l((_vm.portIds),function(id){return _c('plane-port',{key:id,attrs:{\"portId\":id,\"linkLines\":_vm.linkLines}})}),1),(!_vm.cardPlane)?_c('div',{staticClass:\"custom-bg\",attrs:{\"div\":\"\"}},_vm._l((_vm.customBG(_vm.plane._id)),function(item){return _c('span',{key:item.code,style:((\"background-position-x: \" + (item.x) + \"; background-position-y: \" + (item.y)))})}),0):_vm._e(),_c('svg',_vm._l((Object.entries(_vm.linkLines)),function(ref){\nvar key = ref[0];\nvar line = ref[1];\nreturn _c('line',{key:key,attrs:{\"x1\":line.x1,\"y1\":line.y1,\"x2\":line.x2,\"y2\":line.y2,\"fill\":\"none\",\"stroke\":\"yellow\",\"stroke-width\":\"10\"}})}),0)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.zone._id)?_c('div',{class:['zone', _vm.zone.vertical ? 'vertical' : '', _vm.zone.available ? 'available' : ''],style:({\n    left: _vm.zone.left + 'px',\n    top: _vm.zone.top + 'px',\n    color: 'white',\n    fontSize: '10px',\n  }),on:{\"click\":_vm.putDice}},[_c('div',{staticClass:\"scroll-off wraper\"},[_c('plane-zone-sides',{attrs:{\"linkLines\":_vm.linkLines,\"sideList\":_vm.zone.sideList,\"position\":{ left: _vm.zone.left, top: _vm.zone.top, vertical: _vm.zone.vertical }}}),_vm._l((Object.keys(_vm.zone.itemMap)),function(id){return _c('dice',{key:id,attrs:{\"diceId\":id}})})],2)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sideList\"},_vm._l((_vm.sideList),function(side,index){return _c('div',{key:side._id,class:['side' + index],attrs:{\"index\":index,\"id\":side._id,\"code\":side.code,\"x\":_vm.position.left + (_vm.position.vertical ? 36 : index === 0 ? 36 : 108),\"y\":_vm.position.top + (_vm.position.vertical ? (index === 0 ? 36 : 108) : 36)}})}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"sideList\">\r\n    <div\r\n      v-for=\"(side, index) in sideList\"\r\n      :key=\"side._id\"\r\n      :index=\"index\"\r\n      :id=\"side._id\"\r\n      :code=\"side.code\"\r\n      :class=\"['side' + index]\"\r\n      :x=\"position.left + (position.vertical ? 36 : index === 0 ? 36 : 108)\"\r\n      :y=\"position.top + (position.vertical ? (index === 0 ? 36 : 108) : 36)\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    sideList: Array,\r\n    position: {\r\n      left: Number,\r\n      top: Number,\r\n    },\r\n    linkLines: Object,\r\n  },\r\n  methods: {},\r\n  mounted() {\r\n    // console.log('planeZoneSide mounted', this.sideList, this.position);\r\n    this.$nextTick(() => {\r\n      for (const side of this.sideList) {\r\n        const sideEl = document.getElementById(side._id);\r\n        for (const link of Object.keys(side.links)) {\r\n          const linkEl = document.getElementById(link);\r\n          if (sideEl.closest('.plane') && linkEl.closest('.plane')) {\r\n            const x1 = sideEl.getAttribute('x');\r\n            const y1 = sideEl.getAttribute('y');\r\n            const x2 = linkEl.getAttribute('x');\r\n            const y2 = linkEl.getAttribute('y');\r\n            const key = [[x1, y1].join('.'), [x2, y2].join('.')].sort().join('.');\r\n            this.$set(this.linkLines, key, { x1, y1, x2, y2 });\r\n            // if (this.position.vertical) {\r\n            //   this.$set(this.linkLines, key + '-', { x1: x1 - 10, y1, x2: x2 - 10, y2 });\r\n            //   this.$set(this.linkLines, key + '+', { x1: +x1 + 10, y1, x2: +x2 + 10, y2 });\r\n            // } else {\r\n            //   this.$set(this.linkLines, key + '-', { x1, y1: y1 - 10, x2, y2: y2 - 10 });\r\n            //   this.$set(this.linkLines, key + '+', { x1, y1: +y1 + 10, x2, y2: +y2 + 10 });\r\n            // }\r\n          }\r\n        }\r\n      }\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.sideList {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: -1;\r\n  pointer-events: 'none';\r\n}\r\n.sideList > * {\r\n  position: absolute;\r\n}\r\n.sideList > .side0 {\r\n  top: 50%;\r\n  left: 25%;\r\n}\r\n.sideList > .side1 {\r\n  top: 50%;\r\n  left: 75%;\r\n}\r\n.vertical .sideList > .side0 {\r\n  top: 25%;\r\n  left: 50%;\r\n}\r\n.vertical .sideList > .side1 {\r\n  top: 75%;\r\n  left: 50%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planeZoneSides.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planeZoneSides.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./planeZoneSides.vue?vue&type=template&id=6ba0e0c1&scoped=true&\"\nimport script from \"./planeZoneSides.vue?vue&type=script&lang=js&\"\nexport * from \"./planeZoneSides.vue?vue&type=script&lang=js&\"\nimport style0 from \"./planeZoneSides.vue?vue&type=style&index=0&id=6ba0e0c1&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ba0e0c1\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.dice._id)?_c('div',{class:[\n    'domino-dice',\n    _vm.dice.deleted ? 'deleted' : '',\n    _vm.locked ? 'locked' : '',\n    _vm.activeEvent ? 'active-event' : '',\n    _vm.hide ? 'hide' : '' ],attrs:{\"code\":_vm.dice.code},on:{\"click\":function($event){$event.stopPropagation();return (function (e) { return (_vm.activeEvent ? _vm.chooseDice() : _vm.pickDice()); }).apply(null, arguments)}}},[(!_vm.locked)?_c('div',{staticClass:\"controls\"},[_c('div',{class:['scroll-off', 'control rotate', _vm.dice.deleted ? 'hidden' : ''],on:{\"click\":function($event){$event.stopPropagation();return _vm.rotateDice.apply(null, arguments)}}},[_c('font-awesome-icon',{staticStyle:{\"color\":\"#f4e205\"},attrs:{\"icon\":['fas', 'rotate'],\"size\":\"2xl\"}})],1),_c('div',{class:['scroll-off', 'control', 'fake-rotate', 'disabled', _vm.dice.deleted ? 'hidden' : ''],on:{\"click\":function($event){$event.stopPropagation();}}},[_c('font-awesome-icon',{staticStyle:{\"color\":\"#ccc\"},attrs:{\"icon\":['fas', 'rotate'],\"size\":\"2xl\"}})],1),_c('div',{class:['scroll-off', 'control', 'disabled', _vm.replaceAllowed || _vm.dice.deleted ? 'hidden' : '']},[_c('font-awesome-icon',{staticStyle:{\"color\":\"#ccc\"},attrs:{\"icon\":['fass', 'trash'],\"size\":\"2xl\"}})],1),_c('div',{class:['scroll-off', 'control', _vm.replaceAllowed && !_vm.dice.deleted ? '' : 'hidden'],on:{\"click\":function($event){$event.stopPropagation();return _vm.deleteDice.apply(null, arguments)}}},[_c('font-awesome-icon',{staticStyle:{\"color\":\"#f4e205\"},attrs:{\"icon\":['fass', 'trash'],\"size\":\"2xl\"}})],1),_c('div',{class:['scroll-off', 'control', _vm.replaceAllowed && _vm.dice.deleted ? '' : 'hidden'],on:{\"click\":function($event){$event.stopPropagation();return _vm.restoreDice.apply(null, arguments)}}},[_c('font-awesome-icon',{staticStyle:{\"color\":\"#f4e205\"},attrs:{\"icon\":['fas', 'trash-arrow-up'],\"size\":\"2xl\"}})],1)]):_vm._e(),_vm._l((_vm.sideList),function(side){return [_c('div',{key:side._id,class:['el', side.activeEvent ? 'active-event' : '', side.eventData.fakeValue ? 'fake-value' : ''],attrs:{\"id\":side._id,\"value\":side.value},on:{\"click\":function (e) { return (side.activeEvent ? (e.stopPropagation(), _vm.openDiceSideValueSelect(side._id)) : null); }}},[(_vm.selectedDiceSideId === side._id)?_c('dice-side-value-select',{on:{\"select\":_vm.pickActiveEventDiceSide}}):_vm._e()],1)]})],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"select-side-value\"},[_c('div',{staticClass:\"el\",attrs:{\"value\":\"0\"},on:{\"click\":function (e) { return _vm.selectValue(e, 0); }}}),_c('div',{staticClass:\"el\",attrs:{\"value\":\"1\"},on:{\"click\":function (e) { return _vm.selectValue(e, 1); }}}),_c('div',{staticClass:\"el\",attrs:{\"value\":\"2\"},on:{\"click\":function (e) { return _vm.selectValue(e, 2); }}}),_c('div',{staticClass:\"el\",attrs:{\"value\":\"3\"},on:{\"click\":function (e) { return _vm.selectValue(e, 3); }}}),_c('div',{staticClass:\"el\",attrs:{\"value\":\"4\"},on:{\"click\":function (e) { return _vm.selectValue(e, 4); }}}),_c('div',{staticClass:\"el\",attrs:{\"value\":\"5\"},on:{\"click\":function (e) { return _vm.selectValue(e, 5); }}}),_c('div',{staticClass:\"el\",attrs:{\"value\":\"6\"},on:{\"click\":function (e) { return _vm.selectValue(e, 6); }}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"select-side-value\">\r\n    <div class=\"el\" v-on:click=\"(e) => selectValue(e, 0)\" value=\"0\" />\r\n    <div class=\"el\" v-on:click=\"(e) => selectValue(e, 1)\" value=\"1\" />\r\n    <div class=\"el\" v-on:click=\"(e) => selectValue(e, 2)\" value=\"2\" />\r\n    <div class=\"el\" v-on:click=\"(e) => selectValue(e, 3)\" value=\"3\" />\r\n    <div class=\"el\" v-on:click=\"(e) => selectValue(e, 4)\" value=\"4\" />\r\n    <div class=\"el\" v-on:click=\"(e) => selectValue(e, 5)\" value=\"5\" />\r\n    <div class=\"el\" v-on:click=\"(e) => selectValue(e, 6)\" value=\"6\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {},\r\n  computed: {},\r\n  methods: {\r\n    selectValue(event, value) {\r\n      event.stopPropagation();\r\n      this.$emit(\"select\", value);\r\n    },\r\n  },\r\n  mounted() {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.select-side-value {\r\n  display: flex;\r\n  height: 70px;\r\n  position: absolute;\r\n  top: -10px;\r\n  right: 10px;\r\n  box-shadow: 10px 10px 10px 0px black;\r\n  background: black;\r\n  border-radius: 5px;\r\n  z-index: 1;\r\n}\r\n.el {\r\n  position: relative;\r\n  flex-shrink: 0;\r\n  float: left;\r\n  width: 70px;\r\n  height: 70px;\r\n  background-image: url(../../assets/Dices.png);\r\n  background-position: -497px;\r\n  cursor: pointer;\r\n}\r\n.el:hover {\r\n  opacity: 0.7;\r\n}\r\n.el[value=\"0\"] {\r\n  background-position: -0px;\r\n}\r\n.el[value=\"1\"] {\r\n  background-position: -71px;\r\n}\r\n.el[value=\"2\"] {\r\n  background-position: -142px;\r\n}\r\n.el[value=\"3\"] {\r\n  background-position: -213px;\r\n}\r\n.el[value=\"4\"] {\r\n  background-position: -284px;\r\n}\r\n.el[value=\"5\"] {\r\n  background-position: -355px;\r\n}\r\n.el[value=\"6\"] {\r\n  background-position: -426px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./diceSideValueSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./diceSideValueSelect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./diceSideValueSelect.vue?vue&type=template&id=7d068b7e&scoped=true&\"\nimport script from \"./diceSideValueSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./diceSideValueSelect.vue?vue&type=script&lang=js&\"\nimport style0 from \"./diceSideValueSelect.vue?vue&type=style&index=0&id=7d068b7e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d068b7e\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div\r\n    v-if=\"dice._id\"\r\n    :code=\"dice.code\"\r\n    :class=\"[\r\n      'domino-dice',\r\n      dice.deleted ? 'deleted' : '',\r\n      locked ? 'locked' : '',\r\n      activeEvent ? 'active-event' : '',\r\n      hide ? 'hide' : '',\r\n    ]\"\r\n    v-on:click.stop=\"(e) => (activeEvent ? chooseDice() : pickDice())\"\r\n  >\r\n    <div v-if=\"!locked\" class=\"controls\">\r\n      <div :class=\"['scroll-off', 'control rotate', dice.deleted ? 'hidden' : '']\" v-on:click.stop=\"rotateDice\">\r\n        <font-awesome-icon :icon=\"['fas', 'rotate']\" size=\"2xl\" style=\"color: #f4e205\" />\r\n      </div>\r\n      <div :class=\"['scroll-off', 'control', 'fake-rotate', 'disabled', dice.deleted ? 'hidden' : '']\" v-on:click.stop>\r\n        <font-awesome-icon :icon=\"['fas', 'rotate']\" size=\"2xl\" style=\"color: #ccc\" />\r\n      </div>\r\n      <div :class=\"['scroll-off', 'control', 'disabled', replaceAllowed || dice.deleted ? 'hidden' : '']\">\r\n        <font-awesome-icon :icon=\"['fass', 'trash']\" size=\"2xl\" style=\"color: #ccc\" />\r\n      </div>\r\n      <div\r\n        :class=\"['scroll-off', 'control', replaceAllowed && !dice.deleted ? '' : 'hidden']\"\r\n        v-on:click.stop=\"deleteDice\"\r\n      >\r\n        <font-awesome-icon :icon=\"['fass', 'trash']\" size=\"2xl\" style=\"color: #f4e205\" />\r\n      </div>\r\n      <div\r\n        :class=\"['scroll-off', 'control', replaceAllowed && dice.deleted ? '' : 'hidden']\"\r\n        v-on:click.stop=\"restoreDice\"\r\n      >\r\n        <font-awesome-icon :icon=\"['fas', 'trash-arrow-up']\" size=\"2xl\" style=\"color: #f4e205\" />\r\n      </div>\r\n    </div>\r\n    <template v-for=\"side in sideList\">\r\n      <div\r\n        :id=\"side._id\"\r\n        :key=\"side._id\"\r\n        :value=\"side.value\"\r\n        :class=\"['el', side.activeEvent ? 'active-event' : '', side.eventData.fakeValue ? 'fake-value' : '']\"\r\n        v-on:click=\"(e) => (side.activeEvent ? (e.stopPropagation(), openDiceSideValueSelect(side._id)) : null)\"\r\n      >\r\n        <dice-side-value-select v-if=\"selectedDiceSideId === side._id\" v-on:select=\"pickActiveEventDiceSide\" />\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState, mapActions, mapMutations } from 'vuex';\r\nimport diceSideValueSelect from './diceSideValueSelect.vue';\r\n\r\nexport default {\r\n  components: {\r\n    diceSideValueSelect,\r\n  },\r\n  props: {\r\n    diceId: String,\r\n    inHand: Boolean,\r\n    iam: Boolean,\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getStore: 'getStore',\r\n      currentRound: 'currentRound',\r\n      currentPlayerIsActive: 'currentPlayerIsActive',\r\n      actionsDisabled: 'actionsDisabled',\r\n      selectedDiceSideId: 'selectedDiceSideId',\r\n    }),\r\n    dice() {\r\n      const dice = this.getStore(this.diceId, 'dice');\r\n      return dice._id ? dice : { _id: this.diceId };\r\n    },\r\n    sideList() {\r\n      const sideList = this.dice.sideList || [{}, {}];\r\n      return sideList.map(({ _id }) => {\r\n        const side = this.getStore(_id, 'diceside');\r\n        return side._id ? side : { eventData: {} };\r\n      });\r\n    },\r\n    locked() {\r\n      return this.dice.locked || this.actionsDisabled;\r\n    },\r\n    activeEvent() {\r\n      return this.currentPlayerIsActive && this.dice.activeEvent;\r\n    },\r\n    hide() {\r\n      return this.inHand && !this.iam && !this.dice.visible;\r\n    },\r\n    replaceAllowed() {\r\n      return this.dice.placedAtRound !== this.currentRound;\r\n    },\r\n  },\r\n  methods: {\r\n    async chooseDice() {\r\n      await api.game\r\n        .action({\r\n          name: 'eventTrigger',\r\n          data: { eventData: { targetId: this.diceId, targetPlayerId: this.$parent.playerId } },\r\n        })\r\n        .catch((err) => {\r\n          console.log({ err });\r\n          alert(err.message);\r\n        });\r\n    },\r\n    openDiceSideValueSelect(targetId) {\r\n      this.$store.commit('setSelectedDiceSideId', targetId);\r\n    },\r\n    async pickActiveEventDiceSide(fakeValue) {\r\n      await api.game\r\n        .action({ name: 'eventTrigger', data: { eventData: { targetId: this.selectedDiceSideId, fakeValue } } })\r\n        .catch((err) => {\r\n          console.log({ err });\r\n          alert(err.message);\r\n        });\r\n      this.$store.commit('setSelectedDiceSideId', null);\r\n    },\r\n    async pickDice() {\r\n      if (!this.iam) return;\r\n      if (this.locked) return;\r\n      this.$store.commit('setPickedDiceId', this.diceId);\r\n      await api.game.action({ name: 'getZonesAvailability', data: { diceId: this.diceId } }).catch((err) => {\r\n        console.log({ err });\r\n        alert(err.message);\r\n      });\r\n    },\r\n    async rotateDice() {\r\n      await api.game.action({ name: 'rotateDice', data: { diceId: this.diceId } }).catch((err) => {\r\n        console.log({ err });\r\n        alert(err.message);\r\n      });\r\n    },\r\n    async deleteDice() {\r\n      await api.game.action({ name: 'deleteDice', data: { diceId: this.diceId } }).catch((err) => {\r\n        console.log({ err });\r\n        alert(err.message);\r\n      });\r\n    },\r\n    async restoreDice() {\r\n      await api.game.action({ name: 'restoreDice', data: { diceId: this.diceId } }).catch((err) => {\r\n        console.log({ err });\r\n        alert(err.message);\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.domino-dice {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-wrap: wrap;\r\n}\r\n.domino-dice.deleted {\r\n  transform: scale(0.5);\r\n}\r\n.domino-dice.hide > .el {\r\n  background-image: none;\r\n  background: black;\r\n}\r\n\r\n.plane .domino-dice,\r\n.player.iam .hand-dices .domino-dice {\r\n  cursor: pointer;\r\n}\r\n.domino-dice.locked {\r\n  opacity: 0.5;\r\n  cursor: not-allowed !important;\r\n}\r\n\r\n.domino-dice > .controls {\r\n  display: none;\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: darkgrey;\r\n  opacity: 0.9;\r\n  color: white;\r\n  z-index: 1;\r\n  border-radius: 16px;\r\n}\r\n.zone.vertical .domino-dice > .controls {\r\n  flex-wrap: wrap;\r\n}\r\n.zone.vertical .domino-dice > .controls > .control {\r\n  height: 33.333%;\r\n}\r\n\r\n.plane .domino-dice:hover:not(.active-event) > .controls,\r\n.bridge .domino-dice:hover:not(.active-event) > .controls {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n}\r\n.domino-dice > .controls > .control {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.domino-dice > .controls > .control > svg {\r\n  width: 50%;\r\n  height: 100%;\r\n}\r\n.domino-dice > .controls > .control:not(.disabled):hover > svg {\r\n  cursor: pointer;\r\n  color: white !important;\r\n}\r\n\r\n.rotate180 .domino-dice > .controls {\r\n  transform: rotate(180deg);\r\n}\r\n.rotate90 .domino-dice > .controls > .control {\r\n  transform: rotate(270deg);\r\n}\r\n.rotate270 .domino-dice > .controls > .control {\r\n  transform: rotate(90deg);\r\n}\r\n\r\n.domino-dice > .controls > .control.disabled {\r\n  cursor: not-allowed;\r\n}\r\n.domino-dice > .controls > .control.fake-rotate,\r\n.domino-dice > .controls > .control.hidden {\r\n  display: none;\r\n}\r\n.bridge .domino-dice > .controls > .control.fake-rotate:not(.hidden) {\r\n  display: block;\r\n}\r\n.bridge .domino-dice > .controls > .control.rotate {\r\n  display: none;\r\n}\r\n\r\n.domino-dice > .el {\r\n  position: relative;\r\n  flex-shrink: 0;\r\n  float: left;\r\n  width: 70px;\r\n  height: 70px;\r\n  border-radius: 15px;\r\n  background-image: url(../../assets/Dices.png);\r\n}\r\n.player.iam .hand-dices .domino-dice:not(.locked):hover > .el {\r\n  box-shadow: inset 0 0 20px 8px lightgreen;\r\n}\r\n.domino-dice > .el.active-event:hover {\r\n  box-shadow: inset 0 0 20px 8px lightgreen !important;\r\n}\r\n\r\n.domino-dice.active-event {\r\n  box-shadow: none !important;\r\n}\r\n.domino-dice.active-event > .el {\r\n  box-shadow: inset 0 0 20px 8px yellow;\r\n}\r\n.domino-dice.active-event:hover > .el {\r\n  opacity: 0.7;\r\n}\r\n\r\n.domino-dice > .el.fake-value {\r\n  box-shadow: inset 0 0 20px 8px orange;\r\n}\r\n.domino-dice > .el {\r\n  background-position: -497px;\r\n}\r\n.domino-dice > .el[value='0'] {\r\n  background-position: -0px;\r\n}\r\n.domino-dice > .el[value='1'] {\r\n  background-position: -71px;\r\n}\r\n.domino-dice > .el[value='2'] {\r\n  background-position: -142px;\r\n}\r\n.domino-dice > .el[value='3'] {\r\n  background-position: -213px;\r\n}\r\n.domino-dice > .el[value='4'] {\r\n  background-position: -284px;\r\n}\r\n.domino-dice > .el[value='5'] {\r\n  background-position: -355px;\r\n}\r\n.domino-dice > .el[value='6'] {\r\n  background-position: -426px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dice.vue?vue&type=template&id=59c5c82d&scoped=true&\"\nimport script from \"./dice.vue?vue&type=script&lang=js&\"\nexport * from \"./dice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dice.vue?vue&type=style&index=0&id=59c5c82d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59c5c82d\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div\r\n    v-if=\"zone._id\"\r\n    :style=\"{\r\n      left: zone.left + 'px',\r\n      top: zone.top + 'px',\r\n      color: 'white',\r\n      fontSize: '10px',\r\n    }\"\r\n    :class=\"['zone', zone.vertical ? 'vertical' : '', zone.available ? 'available' : '']\"\r\n    v-on:click=\"putDice\"\r\n  >\r\n    <div class=\"scroll-off wraper\">\r\n      <plane-zone-sides\r\n        :linkLines=\"linkLines\"\r\n        :sideList=\"zone.sideList\"\r\n        :position=\"{ left: zone.left, top: zone.top, vertical: zone.vertical }\"\r\n      />\r\n      <dice v-for=\"id in Object.keys(zone.itemMap)\" :key=\"id\" :diceId=\"id\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState, mapActions, mapMutations } from 'vuex';\r\nimport planeZoneSides from './planeZoneSides.vue';\r\nimport dice from './dice.vue';\r\n\r\nexport default {\r\n  components: {\r\n    planeZoneSides,\r\n    dice,\r\n  },\r\n  props: {\r\n    zoneId: String,\r\n    linkLines: Object,\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getStore: 'getStore',\r\n      pickedDiceId: 'pickedDiceId',\r\n    }),\r\n    zone() {\r\n      return this.getStore(this.zoneId, 'zone');\r\n    },\r\n  },\r\n  methods: {\r\n    async putDice() {\r\n      if (this.pickedDiceId) {\r\n        await api.game\r\n          .action({ name: 'replaceDice', data: { diceId: this.pickedDiceId, zoneId: this.zoneId } })\r\n          .then((res) => {\r\n            if (!res.gameFinished) {\r\n              // иначе может отработать уже после выхода в лобби, где нет игрового store\r\n              this.$store.commit('setPickedDiceId', null);\r\n              this.$store.commit('hideZonesAvailability');\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log({ err });\r\n            alert(err.message);\r\n          });\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    // console.log('planeZone mounted', this.zone);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.zone {\r\n  position: absolute;\r\n  height: 73px;\r\n  width: 142px;\r\n  border: 2px solid yellow;\r\n  white-space: pre;\r\n  background: url(../../assets/clear-black-back.png);\r\n  background: black;\r\n}\r\n.zone.vertical {\r\n  height: 142px;\r\n  width: 73px;\r\n}\r\n.zone > .wraper {\r\n  position: relative;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n.zone > .wraper > .domino-dice {\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 0px;\r\n}\r\n.zone.available {\r\n  box-shadow: inset 0 0 20px 8px lightgreen;\r\n}\r\n.zone.available.hard {\r\n  box-shadow: inset 0 0 20px 8px yellow;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planeZone.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planeZone.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./planeZone.vue?vue&type=template&id=652bed6a&scoped=true&\"\nimport script from \"./planeZone.vue?vue&type=script&lang=js&\"\nexport * from \"./planeZone.vue?vue&type=script&lang=js&\"\nimport style0 from \"./planeZone.vue?vue&type=style&index=0&id=652bed6a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"652bed6a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.port._id)?_c('div',{staticClass:\"port\",style:({ left: _vm.port.left + 'px', top: _vm.port.top + 'px', opacity: _vm.port.linkedBridge ? 0 : 1 }),attrs:{\"id\":_vm.port.code,\"x\":_vm.port.left + 37.5,\"y\":_vm.port.top + 37.5}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    v-if=\"port._id\"\r\n    class=\"port\"\r\n    :id=\"port.code\"\r\n    :style=\"{ left: port.left + 'px', top: port.top + 'px', opacity: port.linkedBridge ? 0 : 1 }\"\r\n    :x=\"port.left + 37.5\"\r\n    :y=\"port.top + 37.5\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState, mapActions, mapMutations } from 'vuex';\r\n\r\nexport default {\r\n  props: {\r\n    portId: String,\r\n    linkLines: Object,\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getStore: 'getStore',\r\n    }),\r\n    port() {\r\n      return this.getStore(this.portId, 'port');\r\n    },\r\n  },\r\n  methods: {},\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      const portEl = document.getElementById(this.port.code);\r\n      for (const link of Object.keys(this.port.links)) {\r\n        const linkEl = document.getElementById(link);\r\n        if (portEl.closest('.plane') && linkEl.closest('.plane')) {\r\n          const x1 = portEl.getAttribute('x');\r\n          const y1 = portEl.getAttribute('y');\r\n          const x2 = linkEl.getAttribute('x');\r\n          const y2 = linkEl.getAttribute('y');\r\n          const key = [[x1, y1].join('.'), [x2, y2].join('.')].sort().join('.');\r\n          this.$set(this.linkLines, key, { x1, y1, x2, y2 });\r\n        }\r\n      }\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.port {\r\n  position: absolute;\r\n  height: 75px;\r\n  width: 75px;\r\n  --border: 1px solid yellow;\r\n  background-image: url(../../assets/clear-black-back.png);\r\n  background-size: 75px;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background: black;\r\n  opacity: 1;\r\n}\r\n.port::after {\r\n  content: '';\r\n  background-image: url(../../assets/portIcon.png);\r\n  width: 100%;\r\n  height: 100%;\r\n  background-size: 30px;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  display: block;\r\n  opacity: 0.5;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planePort.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planePort.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./planePort.vue?vue&type=template&id=344e6e0c&scoped=true&\"\nimport script from \"./planePort.vue?vue&type=script&lang=js&\"\nexport * from \"./planePort.vue?vue&type=script&lang=js&\"\nimport style0 from \"./planePort.vue?vue&type=style&index=0&id=344e6e0c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"344e6e0c\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div\r\n    v-if=\"plane._id\"\r\n    :class=\"['plane', activeEvent ? 'active-event' : '', ...plane.customClass, ...Object.values(customClass)]\"\r\n    :style=\"customStyle\"\r\n    v-on:click.stop=\"(e) => (activeEvent ? choosePlane() : selectPlane(e))\"\r\n  >\r\n    <div class=\"zone-wraper\">\r\n      <plane-zone v-for=\"id in zoneIds\" :key=\"id\" v-bind:zoneId=\"id\" :linkLines=\"linkLines\" />\r\n    </div>\r\n    <div class=\"port-wraper\">\r\n      <plane-port v-for=\"id in portIds\" :key=\"id\" v-bind:portId=\"id\" :linkLines=\"linkLines\" />\r\n    </div>\r\n    <div v-if=\"!cardPlane\" div class=\"custom-bg\">\r\n      <span\r\n        v-for=\"item in customBG(plane._id)\"\r\n        :key=\"item.code\"\r\n        :style=\"`background-position-x: ${item.x}; background-position-y: ${item.y}`\"\r\n      />\r\n    </div>\r\n    <svg>\r\n      <line\r\n        v-for=\"[key, line] in Object.entries(linkLines)\"\r\n        :key=\"key\"\r\n        :x1=\"line.x1\"\r\n        :y1=\"line.y1\"\r\n        :x2=\"line.x2\"\r\n        :y2=\"line.y2\"\r\n        fill=\"none\"\r\n        stroke=\"yellow\"\r\n        stroke-width=\"10\"\r\n      />\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState, mapActions, mapMutations } from 'vuex';\r\nimport planeZone from './planeZone.vue';\r\nimport planePort from './planePort.vue';\r\n\r\nexport default {\r\n  name: 'plane',\r\n  components: {\r\n    planePort,\r\n    planeZone,\r\n  },\r\n  data() {\r\n    return { linkLines: {}, customClass: {}, inHandStyle: {} };\r\n  },\r\n  props: {\r\n    planeId: String,\r\n    inHand: Boolean,\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getStore: 'getStore',\r\n      currentPlayerIsActive: 'currentPlayerIsActive',\r\n    }),\r\n    plane() {\r\n      return this.getStore(this.planeId, 'plane');\r\n    },\r\n    customStyle() {\r\n      const style = { ...this.plane, ...(this.inHand ? this.inHandStyle : {}) } || {};\r\n      if (style.left) style.left += 'px';\r\n      if (style.top) style.top += 'px';\r\n      if (style.width) style.width += 'px';\r\n      if (style.height) style.height += 'px';\r\n      if (style.rotation) {\r\n        const rotateDegree = 90 * (style.rotation || 0);\r\n        style.transform = `rotate(${rotateDegree}deg)`;\r\n        this.customClass = { ...this.customClass, rotate: `rotate${rotateDegree}` };\r\n      }\r\n      return style;\r\n    },\r\n    cardPlane() {\r\n      return this.plane.customClass.includes('card-plane');\r\n    },\r\n    zoneIds() {\r\n      return Object.keys(this.plane.zoneMap || {});\r\n    },\r\n    portIds() {\r\n      return Object.keys(this.plane.portMap || {});\r\n    },\r\n    activeEvent() {\r\n      return this.currentPlayerIsActive && this.plane.activeEvent;\r\n    },\r\n  },\r\n  methods: {\r\n    async selectPlane(event) {\r\n      const $plane = event.target.closest('.plane');\r\n      if ($plane.closest('.player-hands')) {\r\n        this.$store.commit('setAvailablePorts', []);\r\n        await api.game\r\n          .action({ name: 'getPlanePortsAvailability', data: { joinPlaneId: this.planeId } })\r\n          .catch((err) => {\r\n            console.log({ err });\r\n            alert(err.message);\r\n          });\r\n      }\r\n    },\r\n    async choosePlane() {\r\n      await api.game.action({ name: 'eventTrigger', data: { eventData: { targetId: this.planeId } } }).catch((err) => {\r\n        console.log({ err });\r\n        alert(err.message);\r\n      });\r\n    },\r\n    customBG(pid) {\r\n      let storageFillData = localStorage.getItem('gamePlaneBackgroundData');\r\n      if (storageFillData)\r\n        try {\r\n          storageFillData = JSON.parse(storageFillData);\r\n        } catch (e) {}\r\n      if (!storageFillData) storageFillData = {};\r\n      let fillData = storageFillData[pid];\r\n\r\n      if (fillData) return fillData;\r\n\r\n      fillData = [];\r\n\r\n      for (let i = 0; i < 18; i++) {\r\n        fillData[i] = {\r\n          x: -80 * Math.floor(14 * Math.random()) + 'px',\r\n          y: -80 * Math.floor(6 * Math.random()) + 'px',\r\n        };\r\n      }\r\n      storageFillData[pid] = fillData;\r\n      localStorage.setItem('gamePlaneBackgroundData', JSON.stringify(storageFillData));\r\n\r\n      return fillData;\r\n    },\r\n    centerPlaneBackground() {\r\n      const p = {},\r\n        gamePlane = document.getElementById('gamePlane');\r\n      const gamePlaneRect = gamePlane.getBoundingClientRect();\r\n\r\n      gamePlane.querySelectorAll('.plane').forEach((plane) => {\r\n        const _id = plane.getAttribute('_id');\r\n        const rect = plane.getBoundingClientRect();\r\n        const offsetTop = rect.top - gamePlaneRect.top;\r\n        const offsetLeft = rect.left - gamePlaneRect.left;\r\n\r\n        if (p.t == undefined || rect.top < p.t) p.t = rect.top;\r\n        if (p.b == undefined || rect.bottom > p.b) p.b = rect.bottom;\r\n        if (p.l == undefined || rect.left < p.l) p.l = rect.left;\r\n        if (p.r == undefined || rect.right > p.r) p.r = rect.right;\r\n\r\n        if (p.ot == undefined || offsetTop < p.ot) p.ot = offsetTop;\r\n        if (p.ol == undefined || offsetLeft < p.ol) p.ol = offsetLeft;\r\n      });\r\n\r\n      const gamePlaneCustomStyleData = {\r\n        height: p.b - p.t + 'px',\r\n        width: p.r - p.l + 'px',\r\n        top: 'calc(50% - ' + ((p.b - p.t) / 2 + p.ot * 1) + 'px)',\r\n        left: 'calc(50% - ' + ((p.r - p.l) / 2 + p.ol * 1) + 'px)',\r\n      };\r\n      this.$store.dispatch('setSimple', { gamePlaneCustomStyleData });\r\n    },\r\n  },\r\n  mounted() {\r\n    // $nextTick не всегда помогает при запуске новой игры\r\n    setTimeout(() => {\r\n      // this.$nextTick(() => {\r\n      if (this.inHand) {\r\n        this.customClass = { ...this.customClass, inHand: `in-hand` };\r\n      } else this.inHandStyle = {};\r\n      this.centerPlaneBackground();\r\n      // });\r\n    }, 100);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.plane {\r\n  position: relative;\r\n  position: absolute;\r\n  width: 500px;\r\n  height: 250px;\r\n  margin-bottom: 10px;\r\n  transform-origin: 0 0;\r\n}\r\n.plane.active-event {\r\n  box-shadow: 0 0 20px 8px yellow !important;\r\n}\r\n.plane:not(.card-plane):after {\r\n  content: '';\r\n  z-index: -1;\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 20px;\r\n  background: url(../../assets/plane.png);\r\n}\r\n.plane > .zone-wraper,\r\n.plane > .port-wraper {\r\n  z-index: 1;\r\n  position: relative;\r\n}\r\n\r\n.plane .custom-bg {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  border-radius: 20px;\r\n  overflow: hidden;\r\n  position: absolute;\r\n  left: 10px;\r\n  top: 5px;\r\n  width: 480px;\r\n  height: 240px;\r\n  z-index: 0;\r\n  filter: blur(2px);\r\n  --filter: grayscale(75%);\r\n  --filter: grayscale(100%) brightness(200%) blur(2px);\r\n}\r\n.plane .custom-bg > span {\r\n  width: 80px;\r\n  height: 80px;\r\n  background-image: url(../../assets/tiles.png);\r\n  background-size: 1120px;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.plane > svg {\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 0;\r\n}\r\n\r\n.plane.rotate90 {\r\n  transform: rotate(90deg);\r\n}\r\n.plane.rotate180 {\r\n  transform: rotate(180deg);\r\n}\r\n.plane.rotate270 {\r\n  transform: rotate(270deg);\r\n}\r\n\r\n.plane.in-hand:not(.card-plane) {\r\n  transform: scale(0.5);\r\n  margin: 125px -250px 0px 0px;\r\n}\r\n\r\n.plane.card-plane {\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plane.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plane.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./plane.vue?vue&type=template&id=4a12e60d&scoped=true&\"\nimport script from \"./plane.vue?vue&type=script&lang=js&\"\nexport * from \"./plane.vue?vue&type=script&lang=js&\"\nimport style0 from \"./plane.vue?vue&type=style&index=0&id=4a12e60d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a12e60d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.card._id)?_c('div',{class:['card-event', _vm.card.played ? 'played' : ''],style:(_vm.customStyle),attrs:{\"name\":_vm.card.name},on:{\"click\":function($event){$event.stopPropagation();return _vm.showInfo(_vm.card.name)}}},[(_vm.canPlay && _vm.currentPlayerIsActive && !_vm.actionsDisabled && !_vm.card.played)?_c('div',{staticClass:\"play-btn\",on:{\"click\":function($event){$event.stopPropagation();return _vm.playCard.apply(null, arguments)}}},[_vm._v(\" Разыграть \")]):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    v-if=\"card._id\"\r\n    :name=\"card.name\"\r\n    :class=\"['card-event', card.played ? 'played' : '']\"\r\n    :style=\"customStyle\"\r\n    v-on:click.stop=\"showInfo(card.name)\"\r\n  >\r\n    <div\r\n      v-if=\"canPlay && currentPlayerIsActive && !actionsDisabled && !card.played\"\r\n      v-on:click.stop=\"playCard\"\r\n      class=\"play-btn\"\r\n    >\r\n      Разыграть\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState, mapActions, mapMutations } from 'vuex';\r\n\r\nexport default {\r\n  props: {\r\n    cardId: String,\r\n    canPlay: Boolean,\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getStore: 'getStore',\r\n      actionsDisabled: 'actionsDisabled',\r\n      currentPlayerIsActive: 'currentPlayerIsActive',\r\n    }),\r\n    card() {\r\n      const card = this.getStore(this.cardId, 'card');\r\n      return card._id ? card : { _id: this.cardId };\r\n    },\r\n    customStyle() {\r\n      const style = { backgroundImage: `url(/img/cards/${this.card.name}.jpg)` };\r\n      return style;\r\n    },\r\n  },\r\n  methods: {\r\n    async playCard() {\r\n      if (this.card.played) return;\r\n      await api.game.action({ name: 'playCard', data: { cardId: this.cardId } }).catch((err) => {\r\n        console.log({ err });\r\n        alert(err.message);\r\n      });\r\n    },\r\n    showInfo(name) {\r\n      api.helper.action({ tutorial: 'tutorialCardEvent', step: name });\r\n      return;\r\n    },\r\n  },\r\n  mounted() {},\r\n};\r\n</script>\r\n\r\n<style>\r\n.card-event {\r\n  position: relative;\r\n  cursor: help;\r\n  border: 1px solid;\r\n  width: 120px;\r\n  height: 180px;\r\n  background-size: cover;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  flex-wrap: wrap;\r\n  border-radius: 10px;\r\n  margin: 0px 0px 0px 5px;\r\n  box-shadow: inset 0px 20px 20px 0px black;\r\n  background-image: url(/img/cards/back-side.jpg);\r\n}\r\n/* .card-event:hover:after {\r\n  content: '?';\r\n  position: absolute;\r\n  color: white;\r\n  top: 0px;\r\n  right: 0px;\r\n} */\r\n.card-event.played {\r\n  filter: grayscale(1);\r\n}\r\n.play-btn {\r\n  cursor: pointer;\r\n  position: absolute;\r\n  bottom: 0px;\r\n  width: 100px;\r\n  font-size: 0.5em;\r\n  border: 1px solid black;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  margin: 6px 10px;\r\n  background: #3f51b5;\r\n  color: white;\r\n  font-size: 16px;\r\n  padding: 8px 0px;\r\n}\r\n.card-event.active {\r\n  border: 4px solid green;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./card.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./card.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./card.vue?vue&type=template&id=30eecef5&\"\nimport script from \"./card.vue?vue&type=script&lang=js&\"\nexport * from \"./card.vue?vue&type=script&lang=js&\"\nimport style0 from \"./card.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.player._id)?_c('div',{class:[\n    'card-worker',\n    'card-worker-' + _vm.player.code,\n    _vm.player.active ? 'active' : '',\n    _vm.choiceEnabled ? 'active-event' : '' ],style:(_vm.customStyle),attrs:{\"id\":_vm.player._id}},[(_vm.showControls && _vm.iam && _vm.currentPlayerIsActive)?_c('div',{staticClass:\"end-round-btn\",on:{\"click\":_vm.endRound}},[_vm._v(\" Закончить раунд \")]):_vm._e(),(_vm.player.active && _vm.player.timerEndTime)?_c('div',{staticClass:\"end-round-timer\"},[_vm._v(_vm._s(this.localTimer))]):_vm._e(),(!_vm.iam)?_c('div',{staticClass:\"card-event\"},[_vm._v(\" \"+_vm._s(_vm.cardDeckCount)+\" \")]):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div\r\n    v-if=\"player._id\"\r\n    :id=\"player._id\"\r\n    :class=\"[\r\n      'card-worker',\r\n      'card-worker-' + player.code,\r\n      player.active ? 'active' : '',\r\n      choiceEnabled ? 'active-event' : '',\r\n    ]\"\r\n    :style=\"customStyle\"\r\n  >\r\n    <div v-if=\"showControls && iam && currentPlayerIsActive\" v-on:click=\"endRound\" class=\"end-round-btn\">\r\n      Закончить раунд\r\n    </div>\r\n    <div v-if=\"player.active && player.timerEndTime\" class=\"end-round-timer\">{{ this.localTimer }}</div>\r\n    <div v-if=\"!iam\" class=\"card-event\">\r\n      {{ cardDeckCount }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState, mapActions, mapMutations } from 'vuex';\r\n\r\nexport default {\r\n  props: {\r\n    playerId: String,\r\n    iam: Boolean,\r\n    showControls: Boolean,\r\n  },\r\n  data() {\r\n    return {\r\n      localTimer: null,\r\n      localTimerUpdateTime: null,\r\n      localTimerId: null,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getStore: 'getStore',\r\n      currentPlayerIsActive: 'currentPlayerIsActive',\r\n    }),\r\n    player() {\r\n      const player = this.getStore(this.playerId, 'player') || {};\r\n      // через watch не осилил (проблема при создании игры - \"Vue cannot detect property addition or deletion\")\r\n      if (player.timerEndTime && this.localTimerUpdateTime !== player.timerUpdateTime) {\r\n        clearTimeout(this.localTimerId);\r\n        this.localTimer = Math.floor((player.timerEndTime - Date.now()) / 1000);\r\n        this.localTimerUpdateTime = player.timerUpdateTime;\r\n        this.localTimerId = setInterval(() => {\r\n          if (this.localTimer !== null) {\r\n            this.localTimer--;\r\n            if (this.localTimer < 0) this.localTimer = 0;\r\n          }\r\n        }, 1000);\r\n      }\r\n      return player;\r\n    },\r\n    customStyle() {\r\n      const style = {};\r\n      // style.backgroundImage = `url(../../assets/cards/${this.card.name||'unknown'}.jpg)`;\r\n      // style.backgroundImage = `url(../../assets/plane.png)`;\r\n      return style;\r\n    },\r\n    choiceEnabled() {\r\n      return this.currentPlayerIsActive && this.player.activeEvent?.choiceEnabled;\r\n    },\r\n    cardDeckCount() {\r\n      return (\r\n        Object.keys(\r\n          Object.keys(this.player.deckMap || {})\r\n            .map((id) => this.getStore(id, 'deck'))\r\n            .filter((deck) => deck.type === 'card' && !deck.subtype)[0]?.itemMap || {},\r\n        ).length || 0\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    async endRound() {\r\n      await api.game.action({ name: 'endRound' }).catch((err) => {\r\n        console.log({ err });\r\n        alert(err.message);\r\n      });\r\n    },\r\n  },\r\n  mounted() {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card-worker {\r\n  position: relative;\r\n  border: 1px solid;\r\n  width: 120px;\r\n  height: 180px;\r\n  background-size: cover;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  flex-wrap: wrap;\r\n  border-radius: 10px;\r\n  margin: 0px 0px 0px 5px;\r\n  box-shadow: inset 0px 20px 20px 0px black;\r\n\r\n  background-image: url(../../assets/workers/1.jpg);\r\n}\r\n.card-worker-1 {\r\n  background-image: url(../../assets/workers/1.jpg);\r\n}\r\n.card-worker-2 {\r\n  background-image: url(../../assets/workers/2.jpg);\r\n}\r\n.card-worker-3 {\r\n  background-image: url(../../assets/workers/3.jpg);\r\n}\r\n.card-worker-4 {\r\n  background-image: url(../../assets/workers/4.jpg);\r\n}\r\n.card-worker-5 {\r\n  background-image: url(../../assets/workers/5.jpg);\r\n}\r\n.card-worker.active {\r\n  outline: 4px solid green;\r\n}\r\n\r\n.card-worker .card-event {\r\n  position: absolute;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  width: 60px;\r\n  height: 90px;\r\n  color: white;\r\n  border: none;\r\n  font-size: 36px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-content: center;\r\n}\r\n#game.mobile-view.portrait-view .card-worker .card-event {\r\n  left: auto;\r\n  right: 0px;\r\n}\r\n\r\n.card-worker.active-event .end-round-btn,\r\n.card-worker.active-event .end-round-timer {\r\n  display: none;\r\n}\r\n\r\n.end-round-btn {\r\n  position: absolute;\r\n  bottom: 0px;\r\n  width: 100px;\r\n  font-size: 0.5em;\r\n  border: 1px solid black;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  margin: 6px 10px;\r\n  background: #3f51b5;\r\n  color: white;\r\n  font-size: 16px;\r\n}\r\n.end-round-timer {\r\n  position: absolute;\r\n  bottom: 50px;\r\n  width: 100px;\r\n  z-index: 1;\r\n  font-size: 64px;\r\n  color: white;\r\n  border-radius: 50%;\r\n  height: 100px;\r\n  line-height: 100px;\r\n  margin: 10px;\r\n  color: #ff5900;\r\n  text-shadow: 4px 4px 0 #fff;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cardWorker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cardWorker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./cardWorker.vue?vue&type=template&id=2d47ed98&scoped=true&\"\nimport script from \"./cardWorker.vue?vue&type=script&lang=js&\"\nexport * from \"./cardWorker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cardWorker.vue?vue&type=style&index=0&id=2d47ed98&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d47ed98\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div v-if=\"player._id\" :class=\"['player', ...customClass, iam ? 'iam' : '', player.active ? 'active' : '']\">\r\n    <div class=\"player-hands\">\r\n      <div v-if=\"planeInHandIds.length\" class=\"hand-planes\">\r\n        <plane v-for=\"id in planeInHandIds\" :key=\"id\" :planeId=\"id\" :inHand=\"true\" />\r\n      </div>\r\n      <div v-if=\"iam\" class=\"hand-cards-list\">\r\n        <div v-for=\"deck in cardDecks\" :key=\"deck._id\" class=\"hand-cards\">\r\n          <card v-for=\"id in Object.keys(deck.itemMap)\" :key=\"id\" :cardId=\"id\" :canPlay=\"iam\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"hand-dices-list\">\r\n        <div v-for=\"deck in dominoDecks\" :key=\"deck._id\" class=\"hand-dices\">\r\n          <card v-if=\"iam && deck.subtype === 'teamlead'\" :card=\"{ name: 'teamlead' }\" />\r\n          <card v-if=\"iam && deck.subtype === 'flowstate'\" :card=\"{ name: 'flowstate' }\" />\r\n          <dice v-for=\"id in Object.keys(deck.itemMap)\" :key=\"id\" :diceId=\"id\" :inHand=\"true\" :iam=\"iam\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"workers\">\r\n      <card-worker :playerId=\"playerId\" :iam=\"iam\" :showControls=\"showControls\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState, mapActions, mapMutations } from 'vuex';\r\nimport plane from './plane.vue';\r\nimport dice from './dice.vue';\r\nimport card from './card.vue';\r\nimport cardWorker from './cardWorker.vue';\r\n\r\nexport default {\r\n  components: {\r\n    plane,\r\n    dice,\r\n    card,\r\n    cardWorker,\r\n  },\r\n  props: {\r\n    customClass: Array,\r\n    playerId: String,\r\n    iam: Boolean,\r\n    showControls: Boolean,\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getStore: 'getStore',\r\n      currentPlayer: 'currentPlayer',\r\n      currentPlayerIsActive: 'currentPlayerIsActive',\r\n    }),\r\n    player() {\r\n      return this.getStore(this.playerId, 'player');\r\n    },\r\n    dominoDecks() {\r\n      return this.deckIds.map((id) => this.getStore(id, 'deck')).filter((deck) => deck.type === 'domino') || [];\r\n    },\r\n    cardDecks() {\r\n      return this.deckIds.map((id) => this.getStore(id, 'deck')).filter((deck) => deck.type === 'card') || [];\r\n    },\r\n    deckIds() {\r\n      return Object.keys(this.player.deckMap || {});\r\n    },\r\n    deckCounters() {\r\n      return this.iam\r\n        ? null\r\n        : {\r\n            domino: Object.keys(this.dominoDecks.find((deck) => !deck.subtype)?.itemMap || {}).length || 0,\r\n            card: Object.keys(this.cardDecks.find((deck) => !deck.subtype)?.itemMap || {}).length || 0,\r\n          };\r\n    },\r\n    planeInHandIds() {\r\n      return Object.keys(\r\n        this.deckIds.map((id) => this.getStore(id, 'deck')).find((deck) => deck.type === 'plane')?.itemMap || {},\r\n      );\r\n    },\r\n    showDecks() {\r\n      return this.currentPlayerIsActive && this.player.activeEvent?.showDecks;\r\n    },\r\n  },\r\n  methods: {},\r\n  mounted() {\r\n    // console.log(\"player mounted\", this.player);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.player:not(.iam) {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: row-reverse;\r\n  margin-top: 10px;\r\n}\r\n#game.mobile-view.portrait-view .player:not(.iam) {\r\n  flex-direction: row;\r\n}\r\n.player.iam {\r\n  position: absolute !important;\r\n  left: auto;\r\n  top: auto;\r\n  right: 20px;\r\n  bottom: 20px;\r\n  display: flex;\r\n}\r\n\r\n#game.mobile-view .player.iam {\r\n  transform: scale(0.7);\r\n  transform-origin: bottom right;\r\n}\r\n\r\n.workers {\r\n  z-index: 1; /* карточка воркера должна быть видна при размещении игровых зон из руки */\r\n  align-self: flex-start;\r\n}\r\n.player.iam .workers {\r\n  align-self: flex-end;\r\n}\r\n\r\n.player-hands {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  align-items: flex-end;\r\n  padding: 0px 10px;\r\n  flex-direction: row-reverse;\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n#game.mobile-view.portrait-view .player-hands {\r\n  justify-content: flex-start;\r\n}\r\n\r\n.hand-cards-list {\r\n  width: auto;\r\n}\r\n.hand-cards {\r\n  display: flex;\r\n}\r\n\r\n.hand-dices-list {\r\n  width: auto;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  flex-direction: column;\r\n}\r\n.player.iam .hand-dices-list {\r\n  flex-direction: column-reverse;\r\n}\r\n.hand-dices {\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: nowrap;\r\n  justify-content: flex-end;\r\n  align-items: flex-end;\r\n  width: 100%;\r\n  padding: 0px 0px 10px 0px;\r\n}\r\n.player.iam .hand-dices {\r\n  padding: 10px 10px 0px 0px;\r\n}\r\n.hand-dices .domino-dice {\r\n  height: 140px;\r\n  width: 70px;\r\n}\r\n\r\n.hand-planes {\r\n  position: fixed;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  z-index: 1;\r\n  background: black;\r\n  height: 220px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.player.iam .hand-planes {\r\n  width: 100%;\r\n  /* transform-origin: bottom; */\r\n}\r\n.hand-planes .plane {\r\n  position: relative;\r\n  /* margin: 0px 10px;\r\n  margin-top: -125px; */\r\n}\r\n.player.iam .hand-planes .plane:hover {\r\n  cursor: pointer;\r\n  opacity: 0.7;\r\n}\r\n\r\n.deck-counters {\r\n  position: absolute;\r\n  color: white;\r\n  font-size: 24px;\r\n  width: 100%;\r\n  right: 0px;\r\n  bottom: 0px;\r\n  text-align: right;\r\n}\r\n.deck-counters b {\r\n  font-size: 42px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./player.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./player.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./player.vue?vue&type=template&id=1a5beabe&scoped=true&\"\nimport script from \"./player.vue?vue&type=script&lang=js&\"\nexport * from \"./player.vue?vue&type=script&lang=js&\"\nimport style0 from \"./player.vue?vue&type=style&index=0&id=1a5beabe&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a5beabe\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.bridge._id)?_c('div',{class:['bridge' ].concat( Object.values(_vm.customClass)),style:(_vm.customStyle),attrs:{\"id\":_vm.bridge._id}},[_c('div',{staticClass:\"zone-wraper\"},_vm._l((_vm.zoneIds),function(id){return _c('plane-zone',{key:id,attrs:{\"zoneId\":id}})}),1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"bridge._id\" :class=\"['bridge', ...Object.values(customClass)]\" :id=\"bridge._id\" :style=\"customStyle\">\r\n    <div class=\"zone-wraper\">\r\n      <plane-zone v-for=\"id in zoneIds\" :key=\"id\" v-bind:zoneId=\"id\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState, mapActions, mapMutations } from 'vuex';\r\nimport planeZone from './planeZone.vue';\r\n\r\nexport default {\r\n  name: 'bridge',\r\n  components: {\r\n    planeZone,\r\n  },\r\n  props: {\r\n    bridgeId: String,\r\n  },\r\n  data() {\r\n    return { customClass: {} };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getStore: 'getStore',\r\n    }),\r\n    bridge() {\r\n      return this.getStore(this.bridgeId, 'bridge');\r\n    },\r\n    customStyle() {\r\n      const style = { ...this.bridge } || {};\r\n      if (style.left) style.left += 'px';\r\n      if (style.top) style.top += 'px';\r\n      if (style.width) style.width += 'px';\r\n      if (style.height) style.height += 'px';\r\n      if (style.rotation) {\r\n        const rotateDegree = 90 * (style.rotation || 0);\r\n        style.transform = `rotate(${rotateDegree}deg)`;\r\n        this.customClass = { rotate: `rotate${rotateDegree}` };\r\n      }\r\n      return style;\r\n    },\r\n    zoneIds() {\r\n      return Object.keys(this.bridge.zoneMap || {});\r\n    },\r\n  },\r\n  methods: {},\r\n  mounted() {\r\n    // console.log('bridge mounted', this.bridge);\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.bridge {\r\n  position: absolute;\r\n  z-index: 1;\r\n}\r\n.bridge .zone {\r\n  margin-left: -73px;\r\n  margin-top: -36.5px;\r\n}\r\n.bridge .zone.vertical {\r\n  margin-left: -36.5px;\r\n  margin-top: -73px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bridge.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bridge.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bridge.vue?vue&type=template&id=a8e970ae&scoped=true&\"\nimport script from \"./bridge.vue?vue&type=script&lang=js&\"\nexport * from \"./bridge.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bridge.vue?vue&type=style&index=0&id=a8e970ae&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a8e970ae\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div\r\n    v-if=\"game._id\"\r\n    id=\"game\"\r\n    :class=\"[isMobile ? 'mobile-view' : '', isLandscape ? 'landscape-view' : 'portrait-view']\"\r\n    @wheel.prevent=\"zoomGamePlane\"\r\n  >\r\n    <tutorial :inGame=\"true\" />\r\n\r\n    <div\r\n      id=\"gamePlane\"\r\n      :style=\"{ ...gamePlaneCustomStyleData, opacity: 1, transformOrigin: 'top', ...gamePlaneControlStyle }\"\r\n    >\r\n      <plane v-for=\"id in Object.keys(this.game.planeMap)\" :key=\"id\" :planeId=\"id\" />\r\n      <bridge v-for=\"id in Object.keys(this.game.bridgeMap)\" :key=\"id\" :bridgeId=\"id\" />\r\n\r\n      <div\r\n        v-for=\"position in possibleAddPlanePositions\"\r\n        :key=\"position.joinPortId + position.joinPortDirect + position.targetPortId + position.targetPortDirect\"\r\n        :joinPortId=\"position.joinPortId\"\r\n        :joinPortDirect=\"position.joinPortDirect\"\r\n        :targetPortId=\"position.targetPortId\"\r\n        :targetPortDirect=\"position.targetPortDirect\"\r\n        :style=\"position.style\"\r\n        class=\"fake-plane\"\r\n        v-on:click=\"addPlane\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"gui game-decks\">\r\n      <div class=\"wrapper\">\r\n        <div class=\"game-status-label\">{{ statusLabel }}</div>\r\n        <div v-for=\"deck in deckList\" :key=\"deck._id\" class=\"deck\" :code=\"deck.code\">\r\n          <div v-if=\"deck._id && deck.code === 'Deck[domino]'\" class=\"hat\" v-on:click=\"takeDice\">\r\n            <!-- !!! не забыть убрать takeDice -->\r\n            {{ Object.keys(deck.itemMap).length }}\r\n          </div>\r\n          <div v-if=\"deck._id && deck.code === 'Deck[card]'\" class=\"card-event\" v-on:click=\"takeCard\">\r\n            {{ Object.keys(deck.itemMap).length }}\r\n          </div>\r\n          <div v-if=\"deck._id && deck.code === 'Deck[card_drop]'\" class=\"card-event\">\r\n            {{ Object.keys(deck.itemMap).length }}\r\n          </div>\r\n          <div v-if=\"deck._id && deck.code === 'Deck[card_active]'\" class=\"deck-active\">\r\n            <!-- активная карта всегда первая - для верстки она должна стать последней -->\r\n            <card v-for=\"id in sortActiveCards(Object.keys(deck.itemMap))\" :key=\"id\" :cardId=\"id\" :canPlay=\"true\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <player :playerId=\"currentPlayer\" :customClass=\"['gui']\" :iam=\"true\" :showControls=\"showPlayerControls\" />\r\n    <div class=\"gui players\">\r\n      <player\r\n        v-for=\"(id, index) in playerIds\"\r\n        :key=\"id\"\r\n        :playerId=\"id\"\r\n        :customClass=\"[`idx-${index}`]\"\r\n        :showControls=\"false\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState, mapActions, mapMutations } from 'vuex';\r\nimport {} from '../components/game/utils';\r\n\r\nimport tutorial from '../components/tutorial/main.vue';\r\nimport player from '../components/game/player.vue';\r\nimport plane from '../components/game/plane.vue';\r\nimport bridge from '../components/game/bridge.vue';\r\nimport card from '../components/game/card.vue';\r\n\r\nexport default {\r\n  components: {\r\n    tutorial,\r\n    player,\r\n    plane,\r\n    bridge,\r\n    card,\r\n  },\r\n  data() {\r\n    return {\r\n      gamePlaneScale: 1,\r\n      gamePlaneTranslateX: 0,\r\n      gamePlaneTranslateY: 0,\r\n      gamePlaneRotation: 0,\r\n      gamePlaneConfig: {\r\n        isDragging: false,\r\n        isTouchMoved: false,\r\n        currentX: 0,\r\n        currentY: 0,\r\n        initialX: 0,\r\n        initialY: 0,\r\n        distanceX: 0,\r\n        distanceY: 0,\r\n        initialDistance: 0,\r\n        xOffset: 0,\r\n        yOffset: 0,\r\n\r\n        isRotating: false,\r\n        initialRotateAngle: 0,\r\n        rotation: 0,\r\n        rotationLast: 0,\r\n      },\r\n      gameId: this.$route.params.id,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getStore: 'getStore',\r\n      isMobile: 'isMobile',\r\n      isLandscape: 'isLandscape',\r\n      currentPlayer: 'currentPlayer',\r\n      currentPlayerIsActive: 'currentPlayerIsActive',\r\n      gamePlaneCustomStyleData: 'gamePlaneCustomStyleData',\r\n      availablePorts: 'availablePorts',\r\n    }),\r\n    gamePlaneControlStyle() {\r\n      const transform = [];\r\n      transform.push('translate(' + this.gamePlaneTranslateX + 'px, ' + this.gamePlaneTranslateY + 'px)');\r\n      transform.push(`scale(${this.gamePlaneScale})`);\r\n      transform.push(`rotate(${this.gamePlaneRotation}deg)`);\r\n      return { transform: transform.join(' ') };\r\n    },\r\n    game() {\r\n      return this.getStore(this.gameId, 'game');\r\n    },\r\n    statusLabel() {\r\n      switch (this.game.status) {\r\n        case 'waitForPlayers':\r\n          return 'Ожидание игроков';\r\n        case 'prepareStart':\r\n          return 'Создание игрового поля';\r\n        case 'inProcess':\r\n          return 'Раунд ' + this.game.round;\r\n        case 'finished':\r\n          return 'Игра закончена';\r\n      }\r\n    },\r\n    showPlayerControls() {\r\n      return this.game.status === 'inProcess';\r\n    },\r\n    playerIds() {\r\n      const ids = Object.keys(this.game.playerMap || {}).sort((id1, id2) => (id1 > id2 ? 1 : -1));\r\n      const curPlayerIdx = ids.indexOf(this.currentPlayer);\r\n      return ids.slice(curPlayerIdx + 1).concat(ids.slice(0, curPlayerIdx));\r\n    },\r\n    helper() {\r\n      return this.getStore(this.currentPlayer, 'player')?.helper || {};\r\n    },\r\n    deckList() {\r\n      const list = Object.keys(this.game.deckMap).map((id) => this.getStore(id, 'deck')) || [];\r\n      return list;\r\n    },\r\n    activeCards() {\r\n      return this.deckList.find((deck) => deck.subtype === 'active') || {};\r\n    },\r\n    possibleAddPlanePositions() {\r\n      if (!this.currentPlayerIsActive) return [];\r\n      return (this.game.availablePorts || []).map(\r\n        ({ joinPortId, joinPortDirect, targetPortId, targetPortDirect, position }) => {\r\n          return {\r\n            joinPortId,\r\n            joinPortDirect,\r\n            targetPortId,\r\n            targetPortDirect,\r\n            style: {\r\n              left: position.left + 'px',\r\n              top: position.top + 'px',\r\n              width: position.right - position.left + 'px',\r\n              height: position.bottom - position.top + 'px',\r\n            },\r\n          };\r\n        },\r\n      );\r\n    },\r\n  },\r\n  watch: {\r\n    'game.round': function () {\r\n      this.$store.commit('setSelectedDiceSideId', null);\r\n      this.$store.commit('setAvailablePorts', []);\r\n    },\r\n    helper: function (val, oldVal) {\r\n      if (val.selector) {\r\n        document.getElementById('app').setAttribute('tutorial-active', true);\r\n        document.querySelector(val.selector).classList.add('tutorial-active');\r\n      }\r\n    },\r\n    'game.status': function (val) {\r\n      if (val === 'finished') {\r\n        localStorage.setItem('currentGame', '');\r\n        this.$router.push({ path: `/` });\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    sortActiveCards(arr) {\r\n      return arr\r\n        .map((id) => this.getStore(id, 'card'))\r\n        .sort((a, b) => (a.played > b.played ? 1 : -1)) // сортируем по времени сыгрывания\r\n        .sort((a, b) => (a.played ? 0 : 1)) // переносим не сыгранные в конец\r\n        .map((card) => card._id);\r\n    },\r\n    async takeDice() {\r\n      await api.game.action({ name: 'takeDice', data: { count: 3 } }).catch((err) => {\r\n        console.log({ err });\r\n        alert(err.message);\r\n      });\r\n    },\r\n    async takeCard() {\r\n      await api.game.action({ name: 'takeCard', data: { count: 5 } }).catch((err) => {\r\n        console.log({ err });\r\n        alert(err.message);\r\n      });\r\n    },\r\n    async addPlane(event) {\r\n      await api.game\r\n        .action({\r\n          name: 'addPlane',\r\n          data: {\r\n            gameId: this.$route.params.id,\r\n            joinPortId: event.target.attributes.joinPortId.value,\r\n            targetPortId: event.target.attributes.targetPortId.value,\r\n            joinPortDirect: event.target.attributes.joinPortDirect.value,\r\n            targetPortDirect: event.target.attributes.targetPortDirect.value,\r\n          },\r\n        })\r\n        .catch((err) => {\r\n          console.log({ err });\r\n          alert(err.message);\r\n        });\r\n      this.$store.commit('setAvailablePorts', []);\r\n    },\r\n    zoomGamePlane(event) {\r\n      this.gamePlaneScale += event.deltaY > 0 ? -0.1 : 0.1;\r\n      if (this.gamePlaneScale < 0.3) this.gamePlaneScale = 0.3;\r\n      if (this.gamePlaneScale > 1) this.gamePlaneScale = 1;\r\n    },\r\n  },\r\n  async created() {\r\n    // console.log('async created() {');\r\n    this.$store.commit('setSimple', { gameId: this.gameId });\r\n    this.$store.commit('setSimple', { store: {} });\r\n  },\r\n  mounted() {\r\n    this.gamePlaneScale = this.isMobile ? 0.5 : 1;\r\n\r\n    api.game\r\n      .enter({ gameId: this.gameId })\r\n      .then((data) => {\r\n        console.log('api.game.enter', data);\r\n      })\r\n      .catch((err) => {\r\n        localStorage.setItem('currentGame', '');\r\n        this.$router.push({ path: `/` });\r\n      });\r\n\r\n    document.addEventListener('contextmenu', function (event) {\r\n      event.preventDefault();\r\n    });\r\n\r\n    const self = this;\r\n    const config = this.gamePlaneConfig;\r\n    document.body.addEventListener('mousedown', function (event) {\r\n      if (event.target.classList.contains('scroll-off') || event.target.classList.contains('gui')) return;\r\n      if (event.button === 2) {\r\n        config.initialRotateAngle = event.clientX;\r\n        config.isRotating = true;\r\n      } else {\r\n        config.initialX = event.clientX - config.xOffset;\r\n        config.initialY = event.clientY - config.yOffset;\r\n        config.isDragging = true;\r\n      }\r\n    });\r\n    document.body.addEventListener('mouseup', function (event) {\r\n      if (event.button === 2) {\r\n        config.rotationLast = config.rotation;\r\n        config.isRotating = false;\r\n      } else {\r\n        config.isDragging = false;\r\n      }\r\n    });\r\n    document.body.addEventListener('mousemove', function (event) {\r\n      if (config.isRotating) {\r\n        config.rotation = config.rotationLast + (event.clientX - config.initialRotateAngle) / 2;\r\n        self.gamePlaneRotation = config.rotation;\r\n      }\r\n      if (config.isDragging) {\r\n        config.currentX = event.clientX - config.initialX;\r\n        config.currentY = event.clientY - config.initialY;\r\n\r\n        config.xOffset = config.currentX;\r\n        config.yOffset = config.currentY;\r\n\r\n        self.gamePlaneTranslateX = config.currentX;\r\n        self.gamePlaneTranslateY = config.currentY;\r\n      }\r\n    });\r\n\r\n    document.body.addEventListener('touchstart', function (event) {\r\n      if (event.target.closest('.helper-dialog')) return;\r\n      const touches = event.touches;\r\n      if (touches.length === 2) {\r\n        const [touch1, touch2] = touches;\r\n        config.initialDistance = Math.hypot(touch1.pageX - touch2.pageX, touch1.pageY - touch2.pageY);\r\n\r\n        config.rotationLast = config.rotation;\r\n        config.initialRotateAngle = Math.atan2(touch2.pageY - touch1.pageY, touch2.pageX - touch1.pageX);\r\n      } else {\r\n        config.initialX = touches[0].pageX;\r\n        config.initialY = touches[0].pageY;\r\n        config.xOffset = self.gamePlaneTranslateX;\r\n        config.yOffset = self.gamePlaneTranslateY;\r\n        config.isTouchMoved = false;\r\n      }\r\n    });\r\n    document.body.addEventListener('touchmove', function (event) {\r\n      if (event.target.closest('.helper-dialog')) return;\r\n      const touches = event.touches;\r\n      if (touches.length === 2) {\r\n        const [touch1, touch2] = touches;\r\n        const distance = Math.hypot(touch1.pageX - touch2.pageX, touch1.pageY - touch2.pageY);\r\n        const delta = distance / config.initialDistance;\r\n\r\n        const angle = Math.atan2(touch2.pageY - touch1.pageY, touch2.pageX - touch1.pageX);\r\n        config.rotation = config.rotationLast + ((angle - config.initialRotateAngle) * 180) / Math.PI;\r\n        self.gamePlaneRotation = config.rotation;\r\n\r\n        // имитируем плавность\r\n        if (delta < 0.5) return;\r\n        else config.initialDistance = distance;\r\n        self.gamePlaneScale += (delta - 1) * 0.5;\r\n      } else {\r\n        config.currentX = event.touches[0].pageX;\r\n        config.currentY = event.touches[0].pageY;\r\n        config.distanceX = config.currentX - config.initialX;\r\n        config.distanceY = config.currentY - config.initialY;\r\n\r\n        if (Math.abs(config.distanceX) > 10 || Math.abs(config.distanceY) > 10) {\r\n          config.isTouchMoved = true;\r\n          self.gamePlaneTranslateX = config.distanceX + config.xOffset;\r\n          self.gamePlaneTranslateY = config.distanceY + config.yOffset;\r\n        }\r\n      }\r\n    });\r\n    document.body.addEventListener('touchend', function (event) {\r\n      if (!config.isTouchMoved) {\r\n        // handle tap event on the movable element\r\n        // event.preventDefault();\r\n      } else {\r\n      }\r\n    });\r\n  },\r\n  async beforeDestroy() {\r\n    console.log('beforeDestroy');\r\n    api.game.exit();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n#game {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n#game.mobile-view {\r\n  touch-action: none;\r\n}\r\n#game .active-event {\r\n  cursor: pointer;\r\n  box-shadow: inset 0 0 20px 8px yellow;\r\n}\r\n\r\n#gamePlane {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n#game.mobile-view #gamePlane {\r\n  margin-left: -50px;\r\n}\r\n#game.mobile-view.landscape-view #gamePlane {\r\n  margin-left: -100px;\r\n}\r\n\r\n.gui {\r\n  position: absolute;\r\n  cursor: pointer;\r\n}\r\n\r\n.gui .deck > .card-event {\r\n  width: 60px;\r\n  height: 90px;\r\n  color: white;\r\n  border: none;\r\n  font-size: 36px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-content: center;\r\n}\r\n\r\n.gui.game-decks {\r\n  top: 10px;\r\n  right: 10px;\r\n}\r\n#game.mobile-view .gui.game-decks {\r\n  transform: scale(0.5);\r\n  transform-origin: top right;\r\n}\r\n.gui.game-decks > .wrapper {\r\n}\r\n\r\n.gui .deck[code='Deck[domino]'] {\r\n  position: absolute;\r\n  top: 35px;\r\n  right: 100px;\r\n  background: url(../assets/hat.png);\r\n  background-size: cover;\r\n  padding: 20px;\r\n  cursor: default;\r\n}\r\n.gui .deck[code='Deck[domino]'] > .hat {\r\n  color: white;\r\n  font-size: 36px;\r\n  padding: 4px;\r\n  border-radius: 50%;\r\n  box-shadow: inset 0px 0px 20px 0px black;\r\n}\r\n\r\n.gui .deck[code='Deck[card]'] {\r\n  position: absolute;\r\n  top: 35px;\r\n  right: 30px;\r\n  cursor: default;\r\n}\r\n\r\n.gui .deck[code='Deck[card_drop]'] {\r\n  position: absolute;\r\n  filter: grayscale(1);\r\n  transform: scale(0.5);\r\n  top: 65px;\r\n  right: 0px;\r\n  cursor: default;\r\n}\r\n\r\n.deck[code='Deck[card_active]'] {\r\n  position: absolute;\r\n  top: 140px;\r\n  right: 0px;\r\n  display: flex;\r\n}\r\n.deck[code='Deck[card_active]'] .card-event:not(:first-child) {\r\n  margin-top: -135px;\r\n}\r\n.deck-active {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n#game.mobile-view.landscape-view .deck[code='Deck[card_active]'] {\r\n  /* top: 150px;\r\n  left: 0px; */\r\n}\r\n\r\n.game-status-label {\r\n  text-align: right;\r\n  color: white;\r\n  font-weight: bold;\r\n  font-size: 2em;\r\n  white-space: nowrap;\r\n  text-shadow: black 1px 0 10px;\r\n}\r\n#game.mobile-view .game-status-label {\r\n  font-size: 1.5em;\r\n}\r\n\r\n.gui.players {\r\n  height: auto;\r\n  transform: scale(0.5);\r\n  display: flex;\r\n  flex-direction: column;\r\n  bottom: 10px;\r\n  left: 10px;\r\n  transform-origin: left bottom;\r\n}\r\n#game.mobile-view.portrait-view .gui.players {\r\n  bottom: 160px;\r\n  right: 20px;\r\n  transform-origin: right bottom;\r\n}\r\n\r\n.plane {\r\n  position: absolute;\r\n  transform-origin: 0 0;\r\n}\r\n.plane.card-event {\r\n  display: block;\r\n}\r\n.plane.card-event.card-event-req_legal {\r\n  background-image: url(/img/cards/req_legal.jpg);\r\n}\r\n.plane.card-event.card-event-req_tax {\r\n  background-image: url(/img/cards/req_tax.jpg);\r\n}\r\n.fake-plane {\r\n  position: absolute;\r\n  background: red;\r\n  border: 1px solid;\r\n  opacity: 0.5;\r\n}\r\n.fake-plane:hover {\r\n  opacity: 0.8;\r\n  z-index: 1;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Game.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Game.vue?vue&type=template&id=3509f68c&\"\nimport script from \"./Game.vue?vue&type=script&lang=js&\"\nexport * from \"./Game.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Game.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./card.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dice.vue?vue&type=style&index=0&id=59c5c82d&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./diceSideValueSelect.vue?vue&type=style&index=0&id=7d068b7e&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cardWorker.vue?vue&type=style&index=0&id=2d47ed98&scoped=true&lang=css&\"","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar isSymbol = require('../internals/is-symbol');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  if (isSymbol(argument)) throw TypeError('Cannot convert a Symbol value to a number');\n  var it = toPrimitive(argument, 'number');\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","// TODO: use something more complex like timsort?\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    mergeSort(array.slice(0, middle), comparefn),\n    mergeSort(array.slice(middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n  var result = [];\n\n  while (lindex < llength || rindex < rlength) {\n    if (lindex < llength && rindex < rlength) {\n      result.push(comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]);\n    } else {\n      result.push(lindex < llength ? left[lindex++] : right[rindex++]);\n    }\n  } return result;\n};\n\nmodule.exports = mergeSort;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bridge.vue?vue&type=style&index=0&id=a8e970ae&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./planeZoneSides.vue?vue&type=style&index=0&id=6ba0e0c1&scoped=true&lang=css&\"","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n"],"sourceRoot":""}